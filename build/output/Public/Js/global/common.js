define(["./configs","./storage","./hack"],function(){var n={}.toString,t=window.$,r=window.navigator.userAgent;return window.com=common={isFunction:function(t){return"[object Function]"===n.call(t)},isString:function(t){return"[object String]"===n.call(t)},isNumber:function(t){return"[object Number]"===n.call(t)},isBoolean:function(t){return"[object Boolean]"===n.call(t)},isNull:function(n){return null===n},isArray:function(t){return"[object Array]"===n.call(t)},isObject:function(t){return"[object Object]"===n.call(t)},isBaseType:function(n){return!this.isArray(n)&&!this.isObject(n)},isUrl:function(n){return/^http:\/\//i.test(n)},isgImgUrl:function(n){return n=n.trim(),/\.(jpeg|jpg|gif|png|bmp)(\?.*)*$/i.test(n)},isJsonP:function(n){return/^\w+\([\[\{].*[\}\]]\)$/.test(n)},isJson:function(n){return/^[\{\[].*[\}\]]$/.test(n)},getType:function(t){var r=n.call(t),e=r.match(/\s(\w+)\]$/i);return r=e[1].toLowerCase().trim()},getObjectLength:function(n){var t=0;for(k in n)t++;return t},ua:r,getRender:function(n,t){return new EJS({url:n}).render({md:t})},dialog:function(n){if(!n.content){var t=n.url||"tpl/dialog";delete n.url,n.content=this.getRender(t,n)}return dialog(n)},alert:function(n){return n||(n={}),n.content||(n.url=n.url||"tpl/alert"),n.className="alertDialog",this.dialog(n)},showLoading:function(){var n={url:"tpl/loading",className:"loadingDialog"};this.dialog(n)},removeLoading:function(){t(".loadingDialog").remove()},bindEnterKey:function(n,r){var e=this;this._bindEnterKeyFuns?this._bindEnterKeyFuns.push(n):(this._bindEnterKeyFuns=[],this._bindEnterKeyFuns.push(n)),t(window).bind("keydown",function(n){if(n=n||window.event,13===n.keyCode)for(var t=0;t<e._bindEnterKeyFuns.length;t++)r?e._bindEnterKeyFuns[t].call(r):e._bindEnterKeyFuns[t]()})},ajax:function(n){n.url&&(n.url+=/^[^\?]*\?/.test(n.url)?"&mdNmk="+Math.random():"?mdNmk="+Math.random());var r={type:"GET",url:this.host,data:"",success:function(){},error:function(){},complete:function(){}};this.mix(r,n),r.success=function(t){n.success(t)},t.ajax(r)},mix:function(n,t){var r;for(r in t)n[r]=t[r]},clon:function(n){var t={},r=this;r.isArray(n)&&(t=[]);!function(n,t){if(r.isObject(n))for(k in n)n.hasOwnProperty(k)&&(r.isObject(n[k])?(t[k]={},arguments.callee(n[k],t[k])):r.isArray(n[k])?(t[k]=[],arguments.callee(n[k],t[k])):t[k]=n[k]);else if(r.isArray(n))for(k in n)r.isObject(n[k])?(t[k]={},arguments.callee(n[k],t[k])):r.isArray(n[k])?(t[k]=[],arguments.callee(n[k],t[k])):t[k]=n[k]}(n,t);return t},gather:{},query:function(n,t){if(!n)return!1;if(this._queryArray||(this._queryArray=[]),this._queryArray.length)return this._queryArray[n];t=t||window.location.href,t=t.replace(/#[^&]*$/,"");var r=/\?(.+)/,e=t.match(r);if(e&&e[1]){var i=e[1].split("&");for(a in i){var o=i[a].split("="),u=o[0],s=o[1];this._queryArray[u]=s}return this._queryArray[n]}return""}},common});